\ProvidesPackage{beamersetup}

\renewcommand\addcontentsline[3]{\addtocontents{#1}{\protect\contentsline{#2}{#3}}}
\usetheme{default}

\subtitle{Cosa sono le stelle: formazione, fenomenologia evolutiva, popolazioni stellari.}

\date{NOW, \today}

\subject{Modelli stellari ed input fisici. Evoluzione stellare. Star formation and star populations}

\makeatletter
\g@addto@macro\normalsize{%
\thinmuskip=0mu
\medmuskip= 0mu plus 0mu minus 0mu
\thickmuskip=0mu plus 0mu
\setlength\abovedisplayskip{8pt plus 0pt minus 0pt}
\setlength\belowdisplayskip{8pt plus 0pt minus 0pt}
\setlength\abovedisplayshortskip{8pt plus 0pt minus 0pt}
\setlength\belowdisplayshortskip{8pt plus 0pt minus 0pt}
\setlength{\parindent}{0pt plus 0pt minus 0pt}
\setlength{\parskip}{3pt plus 0pt minus 0pt}
\setlength{\jot}{0pt plus 0pt minus 0pt}
\setlength{\mathindent}{0pt plus 0pt minus 0pt}
}
\setlength{\leftmargini}{-2pt}
%https://tex.stackexchange.com/questions/115907/how-do-i-remove-white-space-above-itemize-command-in-beamer-using-enumitem
%It's not a good idea to use the enumitem package with beamer since beamer has its own ways of dealing with the standard list-like environments. Just by loading enumitem when using beamer you loose the special beamer formatting and the overlay-awareness of the list-like components.
\renewcommand{\itemize}[1][]{%
	\beamer@ifempty{#1}{}{\def\beamer@defaultospec{#1}}%
	\ifnum \@itemdepth >2\relax\@toodeep\else
	\advance\@itemdepth\@ne
	\beamer@computepref\@itemdepth% sets \beameritemnestingprefix
	\usebeamerfont{itemize/enumerate \beameritemnestingprefix body}%
	\usebeamercolor[fg]{itemize/enumerate \beameritemnestingprefix body}%
    \usebeamertemplate{itemize/enumerate \beameritemnestingprefix body begin}%
	\list
	{\usebeamertemplate{itemize \beameritemnestingprefix item}}
	{\def\makelabel##1{%
			{%
				\hss\llap{{%
						\usebeamerfont*{itemize \beameritemnestingprefix item}%
						\usebeamercolor[fg]{itemize \beameritemnestingprefix item}##1}}%
			}%
		}%
	}
	\fi%
	\beamer@cramped%
	\raggedright%
	\beamer@firstlineitemizeunskip%
}

%\setlist[itemize,0]{%leftmargin=\dimexpr 26pt-.5in
%align=left, leftmargin=-5pt,label=*,labelwidth=10pt
%}
\setlength{\itemindent}{10pt}
\setbeamersize{text margin left=10mm,text margin right=10mm} 
\makeatother

\makeatletter%%see https://tex.stackexchange.com/questions/411987/how-to-fix-hypertargets-directing-links-to-the-line-after-the-target-it-looks-l
 \newcommand{\linkdest}[1]{\Hy@raisedlink{\hypertarget{#1}{}}}
\makeatother

\hypersetup{pdfpagemode=FullScreen}

\addtobeamertemplate{block begin}{%
  \setlength{\textwidth}{0.95\textwidth}%
  \setlength\abovedisplayskip{0pt}%
}{}

\setbeamertemplate{caption}{\insertcaption}
\setbeamercolor{author}{fg=blue}
\setbeamerfont{title}{size=\Large, series=\bfseries}
\setbeamerfont{subtitle}{size=\Large, series=\bfseries}
\setbeamerfont{author}{size=\footnotesize}
\setbeamerfont{date}{size=\small}

\setbeamertemplate{section page}
{
    \begingroup
    \begin{beamercolorbox}[sep=10pt,center,rounded=true,shadow=true]{section title}
        \usebeamerfont{section title}\insertsection\par
    \end{beamercolorbox}
    \endgroup
}

\setbeamertemplate{subsection page}
{
    \begingroup
    \begin{beamercolorbox}[sep=2pt,center,rounded=true,shadow=true]{section title}% sep= vertical space around text (between text and box border)
        \usebeamerfont{section title}\insertsection\par
    \end{beamercolorbox}
    \vspace*{-1.pt}%    \vspace*{10pt}
    \begin{beamercolorbox}[sep=6pt,center,rounded=true,shadow=true]{subsection title}
        \usebeamerfont{subsection title}\insertsubsection\par
    \end{beamercolorbox}
    \endgroup
}
\setbeamerfont{section title}{size=\Large,series=\bfseries}
\setbeamerfont{subsection title}{size=\large,series=\bfseries}
    
\AtBeginDocument{%
\addtolength\abovedisplayskip{-0.5\baselineskip}%
\addtolength\belowdisplayskip{-1\baselineskip}%
\addtolength\abovedisplayshortskip{-0.5\baselineskip}%
\addtolength\belowdisplayshortskip{-1\baselineskip}%
}
\setlength{\mathindent}{0pt}

\makeatletter
\AtBeginPart{%
\addtocontents{toc}{\protect\beamer@partintoc{\the\c@part}{\beamer@partnameshort}{\the\c@page}}%
\frame{\partpage}
\begin{frame}[allowframebreaks]{Outline}
\tableofcontents
\end{frame}
}
%% number, shortname, page.
\providecommand\beamer@partintoc[3]{%
  \ifnum\c@tocdepth=-1\relax
    % requesting onlyparts.
    \makebox[6em]{Part #1:} \parbox{0.5\textwidth}{#2}
    \par
  \fi
}
\define@key{beamertoc}{onlyparts}[]{%
  \c@tocdepth=-1\relax
}
\makeatother%
%%Display section subsection (title page) at beginning section subsection
\AtBeginSection{\addtocounter{cherrysectionlist}{1}\addtocounter{todosectionlist}{1}
\frame{\sectionpage}}
\AtBeginSubsection{\frame{\subsectionpage}}

\setbeamertemplate{navigation symbols}{}

\makeatletter
\setbeamertemplate{headline}
{
    \leavevmode%
    \hbox{%Refintro
\begin{beamercolorbox}[wd=.1\paperwidth,ht=4.5ex,dp=0ex,center]{author in head/foot}%
            \hyperlink{reglez}{RegLez}:\hyperlink{febbraio}{feb}-\hyperlink{marzo}{mar}-\hyperlink{aprile}{apr}-\hyperlink{maggio}{mag}|\hyperlink{succo}{Succo}
        \end{beamercolorbox}%
    
 \begin{beamercolorbox}[wd=.2\paperwidth,ht=4.5ex,dp=0ex,center]{author in head/foot}%refs Part 2
          \hyperlink{stellarstructure}{SSE}:\hyperlink{stellarstructure}{EqS}-\hyperlink{omrel}{rude}-\hyperlink{transport}{trans}(\hyperlink{trarad}{rad}-\hyperlink{kapparad}{$\kappa$}-\hyperlink{tracond}{cond}-\hyperlink{traconv}{$\alpha$}-\hyperlink{diffusion}{diff})-\hyperlink{micro2macro}{eos}-\hyperlink{luminositysourcessinks}{$\epsilon$}(\hyperlink{epsilong}{$\epsilon_g$}-\hyperlink{epsilonn}{$\epsilon_n$}\hyperlink{epsilonpp}{$PP$}-\hyperlink{epsiloncno}{CNO}-\hyperlink{epsilonheavy}{late}-\hyperlink{epsilon}{$\nu$})
        \end{beamercolorbox}%Equazioni struttura stellare, input, stabilit\'a
    
\begin{beamercolorbox}[wd=.1\paperwidth,ht=4.5ex,dp=0ex,center]{author in head/foot}%refs nummod
\hyperlink{stellarsolve}{solve}:\hyperlink{fourODE}{4ODE}-\hyperlink{poly}{poly}\hyperlink{henyey}{Hey}-\hyperlink{shooting}{first$*$}
\end{beamercolorbox}%Soluzione modelli stellari

\begin{beamercolorbox}[wd=.1\paperwidth,ht=4.5ex,dp=0ex,center]{author in head/foot}%refs star formation to pre-MS
	\hyperlink{starformation}{$*$Formation}:\hyperlink{protostellar}{proto}-\hyperlink{preMS}{pMS}
\end{beamercolorbox}%

\begin{beamercolorbox}[wd=.3\paperwidth,ht=4.25ex,dp=0ex,center]{author in head/foot}%refs stellarevolution
            \hyperlink{stellarevolution}{Evol}:\hyperlink{preMS}{PMS}-\hyperlink{MS}{MS}-\hyperlink{LMS}{LMS}-\hyperlink{UMS}{UMS}-\hyperlink{MSdeps}{deps}-\hyperlink{malure}{M-L}-\hyperlink{postMS}{postMS}-\hyperlink{ZAHB}{ZAHB}-\hyperlink{HBlowM}{HBlowM}-\hyperlink{HBIM}{HB-I/M}-\hyperlink{HBpulsating}{HB-puls}-\hyperlink{AGB}{AGB}-\hyperlink{WD}{WD}-\hyperlink{lateintM}{lateintm}-\hyperlink{SN}{SN}
        \end{beamercolorbox}%Equazioni struttura stellare

\begin{beamercolorbox}[wd=.12\paperwidth,ht=4.5ex,dp=0ex,center]{author in head/foot}%refs 
	\hyperlink{U}{U}:\hyperlink{BBN}{BBN}|\hyperlink{mw}{MW}|\hyperlink{starpop}{pop}:\hyperlink{oldPPS}{oPPS}-\hyperlink{youngPPS}{yPPS}-\hyperlink{ageindicator}{age}-\hyperlink{USP}{uSP}
\end{beamercolorbox}%Popolazione stellare/ Galassia

        \begin{beamercolorbox}[wd=.05\paperwidth,ht=4.5ex,dp=0ex,right]{date in head/foot}%
            %   \usebeamerfont{date in head/foot}\insertshortdate{}\hspace*{2em}
            \insertframenumber{}/\inserttotalframenumber
        \end{beamercolorbox}}%
        \vskip0pt%
    }
    \makeatother
