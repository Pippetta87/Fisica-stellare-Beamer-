%! TEX root = main.tex
\makeatletter%stellare(~/Fisica-Stellare)
\let\@starttocorig\@starttoc
\makeatother%%

\documentclass[10pt,xcolor={usenames},fleqn]{beamer}

\usefonttheme{serif} % default family is serif

%% colors
\definecolor{bittersweet}{rgb}{1.0, 0.44, 0.37}
\definecolor{brilliantlavender}{rgb}{0.96, 0.73, 1.0}
\definecolor{antiquefuchsia}{rgb}{0.57, 0.36, 0.51}
\definecolor{violetw}{rgb}{0.93, 0.51, 0.93}
\definecolor{Veronica}{rgb}{0.63, 0.36, 0.94}
\definecolor{atomictangerine}{rgb}{1.0, 0.6, 0.4}
\definecolor{darkgray}{rgb}{0.66, 0.66, 0.66}
\definecolor{brightcerulean}{rgb}{0.11, 0.67, 0.84}
\definecolor{cadmiumorange}{rgb}{0.93, 0.53, 0.18}
\definecolor{ochre}{rgb}{0.8, 0.47, 0.13}
\definecolor{midnightblue}{rgb}{0.1, 0.1, 0.44}
\definecolor{lemon}{rgb}{1.0, 0.97, 0.0}
\definecolor{grey}{rgb}{0.7, 0.75, 0.71}
\definecolor{amber}{rgb}{1.0, 0.75, 0.0}
\definecolor{almond}{rgb}{0.94, 0.87, 0.8}
\definecolor{bf}{RGB}{88, 86, 88}
\definecolor{bb}{RGB}{177, 177, 177}
\definecolor{keyword}{rgb}{0.25, 0.25, 0.28}
\definecolor{todo}{rgb}{0.75, 0.0, 0.2}
\definecolor{must}{rgb}{1.0, 0.31, 0.0}
% redefine frame
\setbeamertemplate{headline}{\vskip-3pt}
\makeatletter
\setbeamertemplate{frametitle}{
\vspace*{-1mm}
    \ifbeamercolorempty[bg]{frametitle}{}{\nointerlineskip}%
    \@tempdima=\textwidth%
    \advance\@tempdima by\beamer@leftmargin%
    \advance\@tempdima by\beamer@rightmargin%
    %\hspace*{1cm} %%%%%%%%%%%%% For example insert shift to right
    \begin{beamercolorbox}[sep=0.3cm,center,wd=\the\@tempdima]{frametitle}
        \usebeamerfont{frametitle}%
        \vbox{}\vskip-1ex%
        \if@tempswa\else\csname beamer@ftecenter\endcsname\fi%
        \strut\insertframetitle\strut\par%
        {%
            \ifx\insertframesubtitle\@empty%
            \else%
            {\usebeamerfont{framesubtitle}\usebeamercolor[fg]{framesubtitle}\insertframesubtitle\strut\par}%
            \fi
        }%
        \vskip-1ex%
        \if@tempswa\else\vskip-.0cm\fi% set inside beamercolorbox... evil here...
\end{beamercolorbox}%
\vspace*{-6mm}
}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% importa pacchetti
\usepackage{usepkg}
\usepackage{makerobust}
\MakeRobustCommand\usebeamertemplate
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Funzioni generali
\usepackage{functions}
%http://tex.stackexchange.com/questions/246/when-should-i-use-input-vs-include
%%
%beamer setup

%%% COUNTERS
\newcounter{cherrykey}%conta le keyword
\newcounter{sectionkey}% conta le section prima della attuale

 \makeatletter
\newcommand{\listofsecframes}{%listofsecframes
  \@starttocorig{secfr-\thesectionkey}
}
\newcommand{\linkdest}[1]{\Hy@raisedlink{\hypertarget{#1}{}}}
\makeatother
\usepackage{LocalF}
\makeatletter
\newif\ifframeinlbf
\frameinlbftrue
\newcommand\listofcherryframesbasic{\@starttocorig{cherryframes}}
%%frameintoc
\newcommand\listofcherryframesname{Important frames}
\newcommand\listofcherryframes{%
\listofcherryframesname\phantomsection: \listofcherryframesbasic}
\addtobeamertemplate{frametitle}{%
    \addtocontents{secfr-\thesectionkey}{%
        \protect\beamer@subsectionintoc{\protect\the\c@section}{0}{%
            \protect\insertframetitle%
        }{\protect\the\c@page}{\protect\the\c@part}{\protect\the\beamer@tocsectionnumber}%
    }%%
\ifframeinlbf
\mode<presentation>{%
        \only<1>{%
            \hypertarget{\protect\insertframetitle}{}%
                    \addcontentsline{cherryframes}{section}{%
                    %\protect\makebox[1em][l]{\normalsize\insertframenumber\hfill}
                        \normalsize\insertframetitle%
                    }%
    }%
 }%
             \else\fi%
}%
{}%
\makeatother
\usepackage{beamersetup}
\usepackage{sources}
\usepackage{mathOp}

\title{Fisica stellare}

% Let's get started
\begin{document}
\frameinlbffalse
%\input{tikzdir}%%contain tikz files as filecontents
\addtolength{\textheight}{-0pt}
\addtolength{\headheight}{0pt}
\addtolength{\footskip}{0pt}

\begin{frame}
  \titlepage
\end{frame}

% Section and subsections will appear in the presentation overview
% and table of contents.
%\frame{\tableofcontents[onlyparts]}

\begin{frame}[allowframebreaks,fragile]{Fisica stellare: argomenti del corso}%label={}
    \begin{columns}[T]
     \begin{column}{0.55\textwidth}
            \tableofcontents[soloparti]
        \end{column}
        \begin{column}{0.45\textwidth}
            \listofcherryframes
        \end{column}
    \end{columns}
\end{frame}

\begin{wordonframe}{Meta.}
    argomenti del corso: toc parts a sinistra e important frames a destra
    todo, must: before reglez

\end{wordonframe}

%\begin{wordonframe}{Perch\'e studio queste cose?? Sviluppi; futuro.}
%Concretezza, concentrazione, indipendenza
%\end{wordonframe}

\part{Intro}\linkdest{intro}
%\begin{frame}{TOC intro}
%\tableofcontents
%\end{frame}
\input{intro}
\input{succo}

\part{Modello Plasma stellare}\linkdest{stellarplasma}
\begin{frame}{this part toc}
    \begin{itemize}
        \item Radiative transfer equation and solution in far interior
        \item Solution of RE in stellar interior
        \item Nuclear Fusion
    \end{itemize}
\end{frame}
\input{stellarplasmamodel}

\part{Modelli stellari: struttura ed evoluzione}\linkdest{evolutivemodels}
\begin{frame}{this part toc}
%\begin{columns}[T]
%\begin{column}{0.5\textwidth}
\begin{itemize}
\item Eqs struttura stellare
\item Meccanismi di trasporto e stabilit\'a
\item Fenomenologia del plasma stellare
\item Luminosity production. Nuclear reactions
\item Metodi soluzione modello stellare
\end{itemize}
%\end{column}
%\begin{column}{0.5\textwidth}
%\tableofcontents
%\end{column}
%\end{columns}
\end{frame}
\input{starmodels}

 \part{Formazione ed evoluzione stellare}
%\begin{frame}{TOC formation evolution}
%\tableofcontents[sections]
%\end{frame}
\input{starformation}
\input{stellarevolution}
 
 \part{Stellar population in the milky way}\linkdest{constraints}
\begin{frame}{this part toc}
\begin{columns}[T]
\begin{column}{0.5\textwidth}
\begin{itemize}
	\item Solar neighborhood
\end{itemize}
\end{column}
\begin{column}{0.5\textwidth}
\tableofcontents
\end{column}
\end{columns}
\end{frame}
\input{GalaxyStarImfPop}
 
\end{document}
